<main>
 <button mat-button [matMenuTriggerFor]="fileMenu">File</button>

  <mat-menu #fileMenu="matMenu" >
    <button mat-menu-item (click)="onNew()" style="width: 100px; text-align:center; width:100%;">New</button>
    
    <button mat-menu-item (click)="fileInput1.click()" style="width: 100px; text-align:center; width:100%;">Import</button>

    <button mat-menu-item (click)="onExportJson()" style="width: 100px; text-align:center; width:100%;">Export</button>
  </mat-menu>
  <input
    type="file"
    #fileInput1
    style="display: none"
    (change)="onImportJson($event)"
    accept=".json"
  />
  <input 
    type="file" 
    #fileInput 
    style="display: none" 
    (change)="onImageSelected($event)" 
    accept="image/*"
  >
  <button (click)="fileInput.click()" style="width: 100px;">
    Add Image
  </button>
  <button mat-icon-button (click)="onAddText()" title="Add Text">
  <span style="font-weight: bold; font-size: 18px;">T</span>
  </button>
  <div>
    <button (click)="onClick('circle')" [class.selected]="isSelected('circle')" title="Circle">
      <svg width="28" height="28" viewBox="0 0 28 28">
        <circle cx="14" cy="14" r="12" fill="none" stroke="currentColor" stroke-width="2" />
      </svg>
    </button>

    <button (click)="onClick('ellipse')" [class.selected]="isSelected('ellipse')" title="Ellipse">
      <svg width="28" height="28" viewBox="0 0 28 28">
        <ellipse
          cx="14"
          cy="14"
          rx="12"
          ry="8"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        />
      </svg>
    </button>

    <button
      (click)="onClick('rectangle')"
      [class.selected]="isSelected('rectangle')"
      title="Rectangle"
    >
      <svg width="28" height="28" viewBox="0 0 28 28">
        <rect x="3" y="7" width="22" height="14" fill="currentColor" />
      </svg>
    </button>

    <button (click)="onClick('square')" [class.selected]="isSelected('square')" title="Square">
      <svg width="28" height="28" viewBox="0 0 28 28">
        <rect
          x="4"
          y="4"
          width="20"
          height="20"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        />
      </svg>
    </button>

    <button
      (click)="onClick('triangle')"
      [class.selected]="isSelected('triangle')"
      title="Triangle"
    >
      <svg width="28" height="28" viewBox="0 0 28 28">
        <polygon points="14,4 26,24 2,24" fill="currentColor" />
      </svg>
    </button>

    <button (click)="onClick('line')" [class.selected]="isSelected('line')" title="Line">
      <svg width="28" height="28" viewBox="0 0 28 28">
        <line
          x1="4"
          y1="24"
          x2="24"
          y2="4"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
    </button>
    <button
      (click)="onClick('free-draw')"
      [class.selected]="isSelected('free-draw')"
      title="Free Draw"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="#000000"
        width="800px"
        height="800px"
        viewBox="-2.5 -3 24 24"
        preserveAspectRatio="xMinYMin"
        class="jam jam-pen"
      >
        <path
          d="M5.648 12.276l-1.65 1.1-.415 1.68 1.665-.42 1.104-1.656-.704-.704zM7.1 10.899l.627.627.091-.032c.937-.334 1.88-1.019 2.824-2.089 1.139-1.29 3.061-3.587 5.757-6.879a.211.211 0 0 0-.297-.297c-3.286 2.693-5.583 4.616-6.881 5.758-1.076.946-1.76 1.888-2.088 2.819l-.033.093zm-.615 5.486L.843 17.814l1.4-5.671 3.004-2.004C5.7 8.863 6.583 7.645 7.9 6.486c1.32-1.162 3.632-3.097 6.936-5.804a2.21 2.21 0 0 1 3.111 3.112c-2.71 3.309-4.645 5.62-5.804 6.934-1.156 1.31-2.373 2.193-3.652 2.65l-2.005 3.007z"
        />
      </svg>
    </button>
  </div>

  <div class="styles">
    <!-- Stroke Color Picker -->
    <label title="Stroke Color">
      Stroke:
      <input
        type="color"
        [(ngModel)]="currentStyles.stroke"
        (change)="applyStyle('stroke', currentStyles.stroke)"
      />
    </label>

    <!-- Fill Color Picker -->
    <label title="Fill Color">
      Fill:
      <input
        type="color"
        [(ngModel)]="currentStyles.fill"
        (change)="applyStyle('fill', currentStyles.fill)"
      />
    </label>

    <!-- Stroke Width -->
    <label title="Stroke Width">
      Width:
      <select
        [(ngModel)]="currentStyles.strokeWidth"
        (change)="applyStyle('strokeWidth', currentStyles.strokeWidth)"
      >
        <option *ngFor="let w of strokeWidths" [value]="w">{{ w }}</option>
      </select>
    </label>

    <!-- Opacity -->
    <label title="Opacity">
      Opacity:
      <select
        [(ngModel)]="currentStyles.opacity"
        (change)="applyStyle('opacity', currentStyles.opacity)"
      >
        <option *ngFor="let o of opacities" [value]="o">{{ o }}</option>
      </select>
    </label>

    <!-- Stroke Line Cap -->
    <label title="Line Cap">
      Cap:
      <select
        [(ngModel)]="currentStyles.lineCap"
        (change)="applyStyle('lineCap', currentStyles.lineCap)"
      >
        <option *ngFor="let cap of lineCaps" [value]="cap">{{ cap }}</option>
      </select>
    </label>

    <!-- Stroke Dash Array -->
    <label title="Dash Style">
      Dash:
      <select
        [(ngModel)]="currentStyles.dash"
        (change)="applyStyle('dash', currentStyles.dash)"
      >
        <option value="">solid</option>
        <option *ngFor="let dash of strokeDashArrays" [value]="dash">{{ dash }}</option>
      </select>
    </label>
  </div>

</main>
